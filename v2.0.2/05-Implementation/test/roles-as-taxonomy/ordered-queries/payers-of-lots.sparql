# Story: I want to see who pays the lots of one specific procedure
PREFIX : <http://example.org/test-abox#>
PREFIX epo: <http://data.europa.eu/a4g/ontology/core#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rt: <http://data.europa.eu/a4g/ontology/cv/roles-taxonomy#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>

SELECT ?procedure ?payer ?lot ?status ?start ?end
where { 
	?event rdf:type epo:ProcurementEvent ;
		:involvesProcedure ?proc ;
		:involvesAgentRole rt:buy_ca_execpay ;
		:involvesAgent ?payerObj ;
		:involvesThing ?lotObj ;
		:status ?status ;
		:involvesPeriod ?period .
	?lotObj epo:id ?lot .
	?payerObj skos:prefLabel ?payer .
	?proc epo:eppi "http://<http://data.europa.eu/a4g/eppi/123456" ;
	epo:title ?procedure .
	?period epo:startDate ?start ;
	            epo:endDate ?end .
} limit 100 
